const fractal = require('../fractal.js'); // import the Fractal instance configured in the fractal.js file

const logger = fractal.cli.console;      // make use of Fractal's console object for logging


const buildServerMessage = urls =>
	`
Fractal server is now running.

Local URL:      ${urls.local}
Network URL:    ${urls.external}
BrowserSync UI: ${urls.ui}

Use ^C to stop the server.
	`;

module.exports = () => () => {
	const server = fractal.web.server({
		sync: true,
	});
	server.on('error', err => logger.error(err.message));
	return server.start().then(() => {
		logger.success(buildServerMessage(server.urls.sync));
	});
};

