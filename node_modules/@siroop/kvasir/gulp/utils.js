const gulp = require('gulp');
const plugins = require('gulp-load-plugins')();

function getTask(task, options) {
	const path = `./${task}`;
	return require(path)(gulp, plugins, options || {});
}

function handleErrors(args) {
	// Send error to the terminal with gulp-notify
	plugins.gNotify.onError({
		title: '<%= error.plugin %>',
		message: '<%= error.message %>',
	}).apply(this, Array.prototype.slice.call(...args));
}

module.exports = {
	handleErrors,
	getTask,
};
