$m-searchbar-hover-color: hue(grey, 80);
$m-searchbar-height-m: 38px;
$m-searchbar-button-width: 70px;

@mixin m-searchbar-focus {
	box-shadow: 0 0 4px hue(teal, 70);
	border: 1px solid hue(teal, 60);
}

.m-searchbar {
	font-size: 0;
	line-height: 0;
	border-radius: $m-searchbar-height-m/2;
	overflow: hidden;
	background-color: $color-white;
	border: solid 1px transparent;
	transition: all linear $base-transition-speed;

	@include breakpoint($mq-md-up) {
		display: inline-block; // fallback ie
		display: flex; /* stylelint-disable-line declaration-block-no-duplicate-properties */
		vertical-align: middle;
		width: 100%;
	}

	&:hover {
		@include m-searchbar-focus;
	}

	&:focus-within {
		@include m-searchbar-focus;
	}

	&__input-wrap {
		position: relative;
		display: inline-block;
		color: $color-grey;
		vertical-align: top;
		width: calc(100% - 61px);
		margin-left: 16px;

		&:hover::placeholder {
			color: $color-black;
		}
	}

	&__search-button {
		font-size: 0;
		display: inline-block;
		vertical-align: top;
		line-height: $m-searchbar-height-m - 2;
		padding: 0 8px;
		text-align: left;
		cursor: pointer;
		min-width: 45px;
		color: hue(grey, 70);
		transition: all linear $base-transition-speed;

		.a-svg-icon {
			stroke-linecap: round;
			transition: all linear $base-transition-speed;
		}

		&:hover .a-svg-icon,
		&:focus .a-svg-icon {
			stroke-width: 80;
		}

		&:hover,
		&:focus {
			background: hue(teal, 20);
			color: hue(grey, 90);
		}
	}

	&__input {
		@include text(medium);
		background: $color-white;
		position: relative;
		border: 0;
		width: 100%;
		color: hue(grey, 80);
		-webkit-appearance: none; /* stylelint-disable-line property-no-vendor-prefix */
		margin: 0;
		padding: 0;
		height: 36px;
		transition: all $base-transition-speed;
		transform: translateX(-2px);

		@include breakpoint($mq-md-up) {
			height: $m-searchbar-height-m - 2;
		}

		&::-webkit-search-decoration,
		&::-webkit-search-cancel-button {
			display: none;
		}

		&:focus {
			outline: 0;
		}

		&:hover {
			color: hue(grey, 80);
		}

		/* stylelint-disable selector-no-vendor-prefix */
		&::-webkit-input-placeholder {
			color: $m-searchbar-hover-color;
		}

		&:-moz-placeholder {
			color: $m-searchbar-hover-color;
		}

		&:-ms-input-placeholder {
			color: $m-searchbar-hover-color;
		}
		/* stylelint-enable selector-no-vendor-prefix */
	}
}
