//TODO: check colors for items not testable yet

//.is-active: when dropdown has a selected value
//.is-visible: when dropdown is open

$m-dropdown-selected-color: hue(teal, 10);
$disabled-color: hue(grey, 20);

.m-dropdown {
	display: flex;

	&__label {
		@include hidden-visually;
	}

	&__select {
		@include text(medium);
		height: 40px;
		width: 100%;
		color: hue(teal, 80);
		border-radius: $base-radius;
		border: border($base-border-color);
		background: $color-white;
		box-shadow: $base-box-shadow;
		padding: 10px;

		&.js-hidden {
			display: none;
		}

		&:focus {
			border: border($base-border-color);
			box-shadow: $base-box-shadow;
		}
	}

	&__faux {
		position: relative;
		display: none;
		width: 100%;

		&.js-visible {
			display: block;
		}

		&.is-opened {
			.m-dropdown__content {
				visibility: visible;
				opacity: 1;
				height: auto;
			}

			.m-dropdown__toggle-arrow {
				transform: rotate(180deg);
			}
		}
	}

	&__toggle {
		@include font(primary, regular);
		@include text(small);
		background: $color-white;
		border: 1px solid hue(grey, 10);
		border-radius: $base-radius;
		width: 100%;
		text-align: left;
		color: hue(grey, 80);
		transition: border $base-transition-speed, box-shadow $base-transition-speed, color $base-transition-speed;
		padding: 0;

		&:hover,
		&:focus {
			border: 1px solid $base-border-color;
			box-shadow: $base-box-shadow;
			color: $color-link-hover;
		}
	}

	&__wrap {
		display: table; // ie9 fix
		display: flex; /* stylelint-disable-line declaration-block-no-duplicate-properties */
		align-items: stretch;
	}

	&__icon {
		align-self: stretch;
		display: flex;
		align-items: center;
		padding: 7px;
	}

	&__text {
		@include font(primary);
		display: table-cell; // ie9 fix
		display: flex; /* stylelint-disable-line declaration-block-no-duplicate-properties */
		align-self: stretch;
		align-items: center;
		padding: 7px;
		flex: 1 0 auto;
	}

	&__toggle-arrow {
		display: table-cell; // ie9 fix
		display: flex; /* stylelint-disable-line declaration-block-no-duplicate-properties */
		align-self: stretch;
		align-items: center;
		color: hue(teal, 70);
		transition: transform $base-transition-speed ease-in-out;
		will-change: transform;
		margin: 7px;
		flex: 0 1 auto;
	}

	&__content {
		@include z-index(dropdown);
		background: $color-white;
		padding: 0;
		margin-top: -2px;
		list-style: none;
		visibility: hidden;
		border: 1px solid $base-border-color;
		border-top: 0;
		border-radius: $base-radius;
		border-top-left-radius: 0;
		border-top-right-radius: 0;
		position: absolute;
		left: 0;
		right: 0;
		overflow-y: scroll;
		max-height: 12.9rem;
		-webkit-overflow-scrolling: touch;
	}

	&__option {
		@include text(small);
		background: $color-white;
		padding: $base-spacing-small;
		width: 100%;
		border: 0;
		border-radius: 0;
		border-top: 1px solid $base-separator-teal;
		color: $color-link;
		text-align: left;

		&:hover,
		&:focus {
			color: $color-link-hover;
			background: $color-bg-teal;
		}

		&.is-selected {
			background: $m-dropdown-selected-color;
			border-top: 1px solid transparent;
			color: $color-link-hover;
		}

		&:disabled {
			background: $color-white;
			color: $disabled-color;
			text-decoration: line-through;
		}
	}

	&--toggle-raw {
		.m-dropdown__toggle {
			padding: 0;
		}
	}
}
