import 'babel-polyfill';

document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/, 'js');

function requireAll(requireContext) {
	return requireContext.keys().map(requireContext);
}

const components = requireAll(require.context('../../60-components', true, /(?!(^.*\.spec.*\.js$)|(^.*\.config.*\.js$))(^.*\.js$)/));
const templates = requireAll(require.context('../../70-templates', true, /(?!(^.*\.spec.*\.js$)|(^.*\.config.*\.js$))(^.*\.js$)/));
const allComponents = [...components, ...templates];

allComponents.forEach((m) => {
	if (m.default && m.default.name) {
		const elements = document.querySelectorAll(`[data-c-name="${m.default.name}"]`);
		for (let i = 0; i < elements.length; i += 1) {
			new m.default(jQuery(elements[i])); // eslint-disable-line no-new
		}
	}
});
